<!DOCTYPE html>

<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>MasterUno â€” Bomba Edition</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Nunito:wght@700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>

<!-- LOGIN -->

<div id="loginScreen" class="screen active">
  <div class="floating-cards">
    <div class="fc fc1"></div><div class="fc fc2"></div>
    <div class="fc fc3"></div><div class="fc fc4"></div>
  </div>
  <div class="login-box">
    <div class="brand">
      <span class="brand-master">MASTER</span><span class="brand-uno">UNO</span>
      <div class="brand-sub">BOMBA EDITION</div>
    </div>
    <div class="form-field">
      <div class="form-label">NICKNAME</div>
      <input type="text" id="loginName" placeholder="Il tuo nome..." maxlength="16" autocomplete="off">
    </div>
    <div class="form-field">
      <div class="form-label">PASSWORD</div>
      <input type="password" id="loginPass" placeholder="Password..." maxlength="32">
    </div>
    <button class="btn-primary" id="loginBtn">ENTRA NEL GIOCO</button>
    <div class="login-hint">Prima volta? Scrivi nome + password per creare l'account.</div>
  </div>
</div>

<!-- LOBBY -->

<div id="lobbyScreen" class="screen">
  <div class="lobby-topbar">
    <div class="topbar-tag" id="lobbyPlayerTag">PLAYER</div>
    <div class="topbar-logo">MASTER<span>UNO</span></div>
    <button class="icon-btn" id="settingsBtn">âš™ï¸</button>
  </div>
  <div class="lobby-scroll">
    <div class="lobby-card">
      <div class="section-label">IL TUO CODICE</div>
      <div class="peer-code" id="myPeerId">â€”â€”</div>
      <button class="btn-copy" id="copyBtn">ğŸ“‹ Copia &amp; Condividi</button>
    </div>
    <div class="sep-text">â€” connettiti a un amico â€”</div>
    <div class="lobby-card">
      <div class="connect-row">
        <input type="text" id="friendIdInput" placeholder="Codice amico..." class="input-code" autocomplete="off">
        <button class="btn-blue" id="connectBtn">ğŸ”— CONNETTI</button>
      </div>
    </div>
    <div class="sep-text">â€” oppure â€”</div>
    <button class="btn-green big" id="playBotBtn">ğŸ¤– GIOCA VS COMPUTER</button>
    <div class="lobby-status" id="lobbyStatus">In attesa di connessione...</div>
  </div>
</div>

<!-- IMPOSTAZIONI -->

<div id="settingsPanel" class="side-panel">
  <div class="panel-head">
    <span>âš™ï¸ IMPOSTAZIONI</span>
    <button class="icon-btn" id="closeSettings">âœ•</button>
  </div>
  <div class="panel-body">
    <div class="sblock">
      <div class="sblock-title">ğŸ‘¥ GIOCATORI AL TAVOLO</div>
      <div class="sblock-desc">I posti liberi vengono riempiti da bot</div>
      <div class="radio-row" id="numPlayersGroup">
        <label class="rpill active" data-val="2"><input type="radio" name="np" value="2" checked>2</label>
        <label class="rpill" data-val="3"><input type="radio" name="np" value="3">3</label>
        <label class="rpill" data-val="4"><input type="radio" name="np" value="4">4</label>
      </div>
    </div>
    <div class="sblock">
      <div class="sblock-title">ğŸ”„ REGOLA 0 â€” Scambio automatico</div>
      <div class="sblock-desc">Quando giochi uno 0, tutti passano le carte al giocatore successivo</div>
      <label class="tog"><input type="checkbox" id="rule0"><span class="tog-track"></span></label>
    </div>
    <div class="sblock">
      <div class="sblock-title">ğŸ¤ REGOLA 7 â€” Scegli con chi scambiare</div>
      <div class="sblock-desc">Quando giochi un 7, scegli con quale giocatore vuoi scambiare la mano</div>
      <label class="tog"><input type="checkbox" id="rule7"><span class="tog-track"></span></label>
    </div>
    <div class="sblock">
      <div class="sblock-title">ğŸ£ PESCA A STRASCIO</div>
      <div class="sblock-desc">I +2 e +4 si impilano: il prossimo pesca tutto lo stack accumulato</div>
      <label class="tog"><input type="checkbox" id="ruleStack" checked><span class="tog-track"></span></label>
    </div>
    <div class="sblock">
      <div class="sblock-title">ğŸƒ MULTI-CARTA stesso numero</div>
      <div class="sblock-desc">Nel tuo turno puoi giocare piÃ¹ carte con lo stesso numero di fila</div>
      <label class="tog"><input type="checkbox" id="ruleMulti"><span class="tog-track"></span></label>
    </div>
    <div class="sblock rules-box">
      <div class="sblock-title">ğŸ“‹ REGOLE BASE</div>
      <ul class="rules-ul">
        <li>Abbina per colore o numero alla carta in cima</li>
        <li>Wild ğŸ¨: scegli il colore che vuoi</li>
        <li>+4: solo se non hai il colore attivo</li>
        <li>DÃ¬ MASTERUNO! con 2 carte, altrimenti +2</li>
        <li>Vince chi esaurisce le carte per primo</li>
      </ul>
    </div>
  </div>
</div>
<div class="panel-bg" id="panelBg"></div>

<!-- GIOCO -->

<div id="gameArea" class="screen">
  <div class="game-bar">
    <div id="turnIndicator" class="turn-pill">CARICAMENTO...</div>
    <button class="icon-btn" id="chatToggleBtn">ğŸ’¬</button>
  </div>
  <div id="opponentsArea"></div>
  <div id="centerArea">
    <div id="deck" class="card-back deck-click"><span>MASTER</span><span>UNO</span></div>
    <div id="discardPile"></div>
    <div id="colorDot" class="color-dot"></div>
  </div>
  <div id="playerArea">
    <span id="playerBadge" class="player-badge">TU: 7</span>
    <div id="playerHand" class="hand"></div>
  </div>
  <button id="masterUnoBtn" class="btn-masteruno hidden">ğŸ”¥ MASTER UNO!</button>
</div>

<!-- SCELTA COLORE -->

<div id="colorPicker" class="overlay hidden">
  <div class="picker-box">
    <div class="picker-title">SCEGLI COLORE</div>
    <div class="pick-grid">
      <div class="pick red"    onclick="setWildColor('red')">ğŸ”´</div>
      <div class="pick blue"   onclick="setWildColor('blue')">ğŸ”µ</div>
      <div class="pick green"  onclick="setWildColor('green')">ğŸŸ¢</div>
      <div class="pick yellow" onclick="setWildColor('yellow')">ğŸŸ¡</div>
    </div>
  </div>
</div>

<!-- SCAMBIO 7 -->

<div id="swapPicker" class="overlay hidden">
  <div class="picker-box">
    <div class="picker-title">CON CHI SCAMBI?</div>
    <div id="swapTargets"></div>
  </div>
</div>

<!-- CHAT -->

<div id="chatPanel" class="chat-panel hidden">
  <div class="chat-head">
    <span>ğŸ’¬ CHAT</span>
    <button class="icon-btn" id="chatCloseBtn">âœ•</button>
  </div>
  <div id="chatMessages" class="chat-msgs"></div>
  <div class="emoji-row">
    <span class="emo" onclick="sendEmoji('ğŸ”¥')">ğŸ”¥</span>
    <span class="emo" onclick="sendEmoji('ğŸ˜‚')">ğŸ˜‚</span>
    <span class="emo" onclick="sendEmoji('ğŸ˜¤')">ğŸ˜¤</span>
    <span class="emo" onclick="sendEmoji('ğŸ‰')">ğŸ‰</span>
    <span class="emo" onclick="sendEmoji('ğŸ’€')">ğŸ’€</span>
    <span class="emo" onclick="sendEmoji('ğŸ‘€')">ğŸ‘€</span>
    <span class="emo" onclick="sendEmoji('ğŸ¤¡')">ğŸ¤¡</span>
    <span class="emo" onclick="sendEmoji('âš¡')">âš¡</span>
  </div>
  <div class="chat-input-row">
    <input type="text" id="chatInput" placeholder="Scrivi..." maxlength="80">
    <button id="chatSendBtn">â¤</button>
  </div>
</div>

<!-- ANIMAZIONE CARTA -->

<div id="drawAnim" class="draw-anim hidden"><span>MASTER</span><span>UNO</span></div>

<!-- FINE PARTITA -->

<div id="endScreen" class="screen">
  <div class="end-box">
    <div class="end-icon" id="endIcon">ğŸ†</div>
    <div class="end-title" id="endTitle">VITTORIA!</div>
    <div class="end-sub" id="endSubtitle"></div>
    <button class="btn-primary" id="playAgainBtn">ğŸ”„ RIVINCITA</button>
    <button class="btn-ghost" id="exitBtn">ğŸšª MENU PRINCIPALE</button>
  </div>
</div>

<div id="toast-container"></div>
<script src="script.js"></script>
</body>
</html>
