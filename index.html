<!DOCTYPE html>

<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>MasterUno â€” Bomba Edition</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Nunito:wght@700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>

<!-- â•â•â• LOGIN â•â•â• -->

<div id="s-login">
  <div class="login-bg">
    <div class="bg-c bg-c1"></div>
    <div class="bg-c bg-c2"></div>
    <div class="bg-c bg-c3"></div>
    <div class="bg-c bg-c4"></div>
  </div>
  <div class="login-box">
    <div class="logo-block">
      <div class="logo-line">
        <span class="logo-m">MASTER</span><span class="logo-u">UNO</span>
      </div>
      <div class="logo-sub">BOMBA EDITION</div>
    </div>
    <div class="field">
      <div class="field-lbl">NICKNAME</div>
      <input class="field-inp" type="text" id="loginName" placeholder="Il tuo nome..." maxlength="16" autocomplete="off">
    </div>
    <div class="field">
      <div class="field-lbl">PASSWORD</div>
      <input class="field-inp" type="password" id="loginPass" placeholder="Password..." maxlength="32">
    </div>
    <button class="btn-gold" id="loginBtn">ENTRA NEL GIOCO</button>
    <div class="login-note">Prima volta? Crea l'account scrivendo nome e password.</div>
  </div>
</div>

<!-- â•â•â• LOBBY â•â•â• -->

<div id="s-lobby" style="display:none">
  <div class="lb-header">
    <div class="lb-tag" id="lb-tag">PLAYER</div>
    <div class="lb-logo">MASTER<span>UNO</span></div>
    <button class="icon-btn" id="settingsBtn">âš™ï¸</button>
  </div>
  <div class="lb-body">

```
<div class="lb-card">
  <div class="lbl-small">IL TUO CODICE PARTITA</div>
  <div class="peer-code" id="myPeerId">â€”â€”</div>
  <button class="btn-outline" id="copyBtn">ğŸ“‹ Copia &amp; Condividi</button>
</div>

<div class="divider-text">â€” o connettiti â€”</div>

<div class="lb-card">
  <div class="conn-row">
    <input class="inp-code" type="text" id="friendIdInput" placeholder="Codice amico..." autocomplete="off">
    <button class="btn-blue" id="connectBtn">ğŸ”— CONNETTI</button>
  </div>
</div>

<div class="divider-text">â€” o gioca da solo â€”</div>

<button class="btn-green" id="playBotBtn">ğŸ¤– GIOCA VS COMPUTER</button>

<div class="lb-status" id="lb-status">In attesa di connessione...</div>
```

  </div>
</div>

<!-- â•â•â• IMPOSTAZIONI â•â•â• -->

<div class="side-panel" id="settingsPanel">
  <div class="sp-head">
    <span>âš™ï¸ IMPOSTAZIONI</span>
    <button class="icon-btn" id="closeSettings">âœ•</button>
  </div>
  <div class="sp-body">

```
<div class="setting">
  <div class="setting-title">ğŸ‘¥ NUMERO GIOCATORI</div>
  <div class="setting-desc">I posti liberi vengono riempiti da bot</div>
  <div class="pill-row" id="numPlayersGroup">
    <button class="pill active" data-val="2">2</button>
    <button class="pill" data-val="3">3</button>
    <button class="pill" data-val="4">4</button>
  </div>
</div>

<div class="setting">
  <div class="setting-title">ğŸ”„ REGOLA 0 â€” Scambio automatico</div>
  <div class="setting-desc">Tutti passano le carte in senso di gioco quando giochi uno 0</div>
  <label class="toggle"><input type="checkbox" id="rule0"><span class="tk"></span></label>
</div>

<div class="setting">
  <div class="setting-title">ğŸ¤ REGOLA 7 â€” Scegli con chi scambiare</div>
  <div class="setting-desc">Quando giochi un 7, scegli con chi vuoi scambiarti le carte</div>
  <label class="toggle"><input type="checkbox" id="rule7"><span class="tk"></span></label>
</div>

<div class="setting">
  <div class="setting-title">ğŸ£ PESCA A STRASCIO</div>
  <div class="setting-desc">+2 e +4 si accumulano â€” il malcapitato pesca tutto lo stack</div>
  <label class="toggle"><input type="checkbox" id="ruleStack" checked><span class="tk"></span></label>
</div>

<div class="setting">
  <div class="setting-title">ğŸƒ MULTI-CARTA stesso numero</div>
  <div class="setting-desc">Puoi giocare piÃ¹ carte con lo stesso numero nello stesso turno</div>
  <label class="toggle"><input type="checkbox" id="ruleMulti"><span class="tk"></span></label>
</div>

<div class="setting rules-box">
  <div class="setting-title">ğŸ“‹ REGOLE CLASSICHE</div>
  <ul class="rules-list">
    <li>Abbina per colore o numero alla carta in cima</li>
    <li>Wild ğŸ¨ â†’ scegli il colore che vuoi</li>
    <li>+4 â†’ solo senza il colore attivo; attacca gli stack</li>
    <li>DÃ¬ <strong>MASTERUNO!</strong> con 2 carte, altrimenti +2</li>
    <li>Vince chi finisce le carte per primo</li>
  </ul>
</div>
```

  </div>
</div>
<div class="sp-overlay" id="spOverlay"></div>

<!-- â•â•â• GIOCO â•â•â• -->

<div id="s-game" style="display:none">
  <div class="game-bar">
    <div class="turn-badge" id="turnBadge">CARICAMENTO...</div>
    <button class="icon-btn" id="chatBtn">ğŸ’¬</button>
  </div>

  <div id="opponentsArea"></div>

  <div class="center-area">
    <div id="deckEl" class="card-back deck-btn">
      <span>MASTER</span><span>UNO</span>
    </div>
    <div id="discardEl"></div>
    <div id="colorDot" class="color-dot"></div>
  </div>

  <div class="player-area">
    <div class="player-bar">
      <span class="my-badge" id="myBadge">TU: 7</span>
    </div>
    <div id="playerHand" class="hand"></div>
  </div>

<button id="unoBtn" class="uno-btn" style="display:none">ğŸ”¥ MASTER UNO!</button>

</div>

<!-- â•â•â• SCELTA COLORE â•â•â• -->

<div id="colorPicker" class="fullscreen-modal" style="display:none">
  <div class="modal-box">
    <div class="modal-title">SCEGLI COLORE</div>
    <div class="color-grid">
      <div class="cpick red"    onclick="setWildColor('red')">ğŸ”´</div>
      <div class="cpick blue"   onclick="setWildColor('blue')">ğŸ”µ</div>
      <div class="cpick green"  onclick="setWildColor('green')">ğŸŸ¢</div>
      <div class="cpick yellow" onclick="setWildColor('yellow')">ğŸŸ¡</div>
    </div>
  </div>
</div>

<!-- â•â•â• SCAMBIO 7 â•â•â• -->

<div id="swapPicker" class="fullscreen-modal" style="display:none">
  <div class="modal-box">
    <div class="modal-title">CON CHI SCAMBI?</div>
    <div id="swapTargets" class="swap-list"></div>
  </div>
</div>

<!-- â•â•â• CHAT â•â•â• -->

<div id="chatPanel" class="chat-panel" style="display:none">
  <div class="chat-head">
    <span>ğŸ’¬ CHAT</span>
    <button class="icon-btn" id="chatClose">âœ•</button>
  </div>
  <div id="chatMsgs" class="chat-msgs"></div>
  <div class="emoji-bar">
    <span class="emo" onclick="sendEmoji('ğŸ”¥')">ğŸ”¥</span>
    <span class="emo" onclick="sendEmoji('ğŸ˜‚')">ğŸ˜‚</span>
    <span class="emo" onclick="sendEmoji('ğŸ˜¤')">ğŸ˜¤</span>
    <span class="emo" onclick="sendEmoji('ğŸ‰')">ğŸ‰</span>
    <span class="emo" onclick="sendEmoji('ğŸ’€')">ğŸ’€</span>
    <span class="emo" onclick="sendEmoji('ğŸ‘€')">ğŸ‘€</span>
    <span class="emo" onclick="sendEmoji('ğŸ¤¡')">ğŸ¤¡</span>
    <span class="emo" onclick="sendEmoji('âš¡')">âš¡</span>
  </div>
  <div class="chat-input-row">
    <input type="text" id="chatInput" class="field-inp" placeholder="Scrivi..." maxlength="80" style="font-size:14px;padding:10px 14px;">
    <button id="chatSend" class="btn-blue" style="padding:10px 14px;font-size:15px;">â¤</button>
  </div>
</div>

<!-- â•â•â• ANIMAZIONE CARTA â•â•â• -->

<div id="drawAnim" class="draw-anim" style="display:none">
  <span>MASTER</span><span>UNO</span>
</div>

<!-- â•â•â• FINE â•â•â• -->

<div id="s-end" style="display:none">
  <div class="end-box">
    <div class="end-icon" id="endIcon">ğŸ†</div>
    <div class="end-title" id="endTitle">VITTORIA!</div>
    <div class="end-sub"   id="endSub"></div>
    <button class="btn-gold" id="playAgainBtn" style="margin-top:10px">ğŸ”„ RIVINCITA</button>
    <button class="btn-ghost" id="exitBtn">ğŸšª MENU PRINCIPALE</button>
  </div>
</div>

<div id="toasts"></div>

<script src="script.js"></script>

</body>
</html>
